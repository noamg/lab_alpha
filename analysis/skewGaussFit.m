function [fitResult,gof] = skewGaussFit(dataVec,peakList)

peakList = peakList(:)';

gaussian = @(x) (1/sqrt((2*pi))*exp(-x.^2/2));
skewedgaussian = @(x,alpha) 2*gaussian(x).*normcdf(alpha*x);
fitSkewGauss = @(x,a,b,c,d) a*skewedgaussian((x-b)/c,d);
% std = 4;
% alpha = -4;
sumOfFSG = @(a1,a2,a3,a4,a5,a6,a7,a8,b1,b2,b3,b4,b5,b6,b7,b8,...
    std,alpha,x)...% d1,d2,d3,d4,d5,d6,d7,d8,x)...
    ...%     c1,c2,c3,c4,c5,c6,c7,c8,d1,d2,d3,d4,d5,d6,d7,d8,x)...
    fitSkewGauss(x,a1,b1,std,alpha)+...
    fitSkewGauss(x,a2,b2,std,alpha)+...
    fitSkewGauss(x,a3,b3,std,alpha)+...
    fitSkewGauss(x,a4,b4,std,alpha)+...
    fitSkewGauss(x,a5,b5,std,alpha)+...
    fitSkewGauss(x,a6,b6,std,alpha)+...
    fitSkewGauss(x,a7,b7,std,alpha)+...
    fitSkewGauss(x,a8,b8,std,alpha);

[fitResult,gof] = fit([0:2047]', dataVec', sumOfFSG,...
    'StartPoint',[1e3*ones(1,8),peakList,4,-4]...
    ,'Lower',[5*ones(1,8),[280,300,370,460,470,510,610,990],0.5,-10]...
    ,'Upper',[1e4*ones(1,8),[800,820,860,910,915,945,1020,1315],20,-0.01]...
    ,'MaxFunEvals',5e3,'MaxIter',1e4);
